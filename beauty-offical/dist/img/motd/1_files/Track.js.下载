(function(){"use strict";var DS={Win:window,Doc:document,Nav:navigator,ReVisit:"rv",ProtocolRegExp:new RegExp("^http://|https://|'","i"),LogType:"Pageview|Event|AddToCart|Purchase|AddToWishlist|Search|Registration|Telephone|Consultation|CustomData",LogServer:"clickstream.cresendo.net",CookieDays:365*24*60*60*2,EtsParamState:false,ArrParamNm:["ets_id","ets_source","ets_medium","ets_campaign","ets_group","ets_term","ets_content","utm_source","utm_source","utm_medium","utm_campaign","utm_group","utm_term","utm_content"],NaverParamState:false,ArrNaverParamNm:["n_campaign_type","n_ad_group","n_media","n_ad","n_keyword","n_keyword_id","n_query","n_rank"],FingerOption:{excludeJsFonts:true},Ul:function(){return this.Doc.location.href},Rf:function(){return this.Doc.referrer},Ulp:function(){return this.Doc.location.search},BrowLanguage:function(){return(this.Win.navigator.language||this.Win.navigator.userLanguage||this.Win.navigator.systemLanguage||this.Win.navigator.browserLanguage)},Screen:function(){return screen.width+" x "+screen.height},Charset:function(){return this.Doc.characterSet||this.Doc.charset},Protocol:function(){return this.Win.location.protocol},BrowChk:function(){return/Chrome/.test(this.Nav.userAgent)&&!/Edge|Android/.test(this.Nav.userAgent)}};var COOKIE={Set:function(Ec,Ed,Ee,Ef,Eg){var dt=new Date();var ut=dt.getTime();var pt="";Ee=(!Ee)?"/":Ee;if(Ed===null)Eg=0;if(Eg!=null){dt.setTime(ut+(Eg*1000));pt=" expires="+dt.toUTCString()+";"}if(Ef!=null)pt+=" domain="+Ef+";";DS.Doc.cookie=Ec+"="+escape(Ed)+"; path="+Ee+";"+pt},Get:function(Ec){var RT=DS.Doc.cookie.match('(^|;) ?'+Ec+'=([^;]*)(;|$)');if(RT)return unescape(RT[2]);else return""}};var URL={GetParam:function(PNm){var PVal="";if(DS.Ulp()&&DS.Ulp()!=""){var PUrl=DS.Ulp().substring(1);var ArrParam=PUrl.split("&");var arrParNm,i;var ArrParamLength=ArrParam.length;for(i=0;i<ArrParamLength;i++){arrParNm=ArrParam[i].split("=");if(arrParNm[0].toUpperCase()===PNm.toUpperCase()){PVal=arrParNm[1];break}}}return PVal},GetDomain:function(Ul){var Url=Ul.replace(DS.ProtocolRegExp,"");if(Url.indexOf(":")>-1){Url=Url.substring(0,Url.indexOf(":"))}if(Url.indexOf("/")>-1){Url=Url.substring(0,Url.indexOf("/"))}var arr=Url.split(".");var arrLength=arr.length;if(arrLength==3){if(arr[1].length==2||arr[1]=="com"){return Url}else{return arr[1]+"."+arr[2]}}else if(arrLength>3){if(arr[arrLength-2].length==2||arr[arrLength-2]=="com"){return arr[arrLength-3]+"."+arr[arrLength-2]+"."+arr[arrLength-1]}else{return arr[arrLength-2]+"."+arr[arrLength-1]}}else{return Url}}};var UTIL={GetId:function(){var d=new Date().getTime();var idcode="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";var uuid=idcode.replace(/[xy]/g,function(c){var r=(d+Math.random()*16)%16|0;d=Math.floor(d/16);var idcodeset=(c==='x'?r:(r&0x7|0x8));return idcodeset.toString(16)});return uuid.replace(/-/g,"")},GetFingerId:function(callback){try{new Fingerprint2(DS.FingerOption).get(function(result,components){DS.Fid=result;callback()})}catch(e){callback()}},GetIsund:function(para,str){if(/undefined|'undefined'/.test(str)){return""}else if(!str){return""}else{return para+str}},GetIsundValue:function(para,str){if(/undefined|'undefined'/.test(para)||!para){return str}else{return para}},SetSendChk:function(msecs){var start=new Date().getTime();var cur=start;while(cur-start<msecs){cur=new Date().getTime()}},SetJSON:function(){window.JSON={stringify:(function(){var toString=Object.prototype.toString;var isArray=Array.isArray||function(a){return toString.call(a)==='[object Array]'};var escMap={'"':'\\"','\\':'\\\\','\b':'\\b','\f':'\\f','\n':'\\n','\r':'\\r','\t':'\\t'};var escFunc=function(m){return escMap[m]||'\\u'+(m.charCodeAt(0)+0x10000).toString(16).substr(1)};var escRE=/[\\"\u0000-\u001F\u2028\u2029]/g;return function stringify(value){if(value==null){return'null'}else if(typeof value==='number'){return isFinite(value)?value.toString():'null'}else if(typeof value==='boolean'){return value.toString()}else if(typeof value==='object'){if(typeof value.toJSON==='function'){return stringify(value.toJSON())}else if(isArray(value)){var res='[';for(var i=0;i<value.length;i++)res+=(i?', ':'')+stringify(value[i]);return res+']'}else if(toString.call(value)==='[object Object]'){var tmp=[];for(var k in value){if(value.hasOwnProperty(k))tmp.push(stringify(k)+': '+stringify(value[k]))}return'{'+tmp.join(', ')+'}'}}return'"'+value.toString().replace(escRE,escFunc)+'"'}})()}}};var LOG={Basic:function(){var Cookiename=DS.Aid+"_";var RFDomain=URL.GetDomain(DS.Rf());var ULDoMain=URL.GetDomain(DS.Ul());var ToDayTime=new Date().getTime();DS.Cid=COOKIE.Get(Cookiename+"CID");DS.FirstDate=COOKIE.Get(Cookiename+"FIRSTDATE");DS.LastDate=COOKIE.Get(Cookiename+"LASTDATE");var i;var ArrParamNmLength=DS.ArrParamNm.length;for(i=0;i<ArrParamNmLength;i+=1){if(URL.GetParam(DS.ArrParamNm[i])!=""){DS.EtsParamState=true;break}}var ArrNaverParamNmLength=DS.ArrNaverParamNm.length;for(i=0;i<ArrNaverParamNmLength;i+=1){if(URL.GetParam(DS.ArrNaverParamNm[i])!=""){DS.PageviewSendState=true;break}}if(RFDomain!==""){if(ULDoMain!==RFDomain&&DS.EtsParamState){DS.VisitType="AdInflow"}else if(ULDoMain===RFDomain&&DS.EtsParamState){DS.VisitType="ReInflow"}else{DS.VisitType="LinkInflow"}}else{DS.VisitType="DirInflow"}if(DS.EtsParamState){DS.LastDate=ToDayTime;COOKIE.Set(Cookiename+"LASTDATE",DS.LastDate,"/",ULDoMain,DS.CookieDays)}if(!DS.Cid||DS.Cid===""){DS.Cid=UTIL.GetId();COOKIE.Set(Cookiename+"CID",DS.Cid,"/",ULDoMain,DS.CookieDays)}if((!DS.FirstDate||DS.FirstDate==="")&&DS.EtsParamState){DS.ReVisit="nv";DS.FirstDate=ToDayTime;COOKIE.Set(Cookiename+"FIRSTDATE",DS.FirstDate,"/",ULDoMain,DS.CookieDays)}},Send:function(obj){var type=obj[1];var val=obj.length>2?JSON.stringify(obj[2]):undefined;var cus=obj.length>3?JSON.stringify(obj[3]):undefined;if(type==="CustomData"){cus=val;val=undefined}var url="//"+DS.LogServer+"/?ac="+DS.Aid+UTIL.GetIsund("&vt=",DS.VisitType)+UTIL.GetIsund("&vi=",DS.ReVisit)+"&ul="+encodeURIComponent(DS.Ul())+UTIL.GetIsund("&rl=",encodeURIComponent(DS.Rf()))+"&fcd="+UTIL.GetIsundValue(DS.FirstDate,7258118400000)+UTIL.GetIsund("&lcd=",DS.LastDate)+"&cid="+DS.Cid+UTIL.GetIsund("&fid=",DS.Fid)+"&ty="+type+UTIL.GetIsund(type==="Event"?"&em=":"&val=",encodeURIComponent(val))+UTIL.GetIsund("&cus=",encodeURIComponent(cus))+"&lan="+DS.BrowLanguage()+"&scn="+DS.Screen()+"&cs="+DS.Charset()+"&vr=7.0.6"+"&ck="+(new Date().getTime());try{var eLogxhr;if(DS.Protocol()=="https:"&&DS.BrowChk()){eLogxhr=new XMLHttpRequest();eLogxhr.open("GET",url,true);eLogxhr.send(null)}else{eLogxhr=new Image();eLogxhr.src=url;UTIL.SetSendChk(300)}}catch(e){console.log(e)}}};var push=function(obj){switch(obj[0]){case"init":DS.Aid=obj[1];LOG.Basic();break;case"send":if(new RegExp(obj[1],"i").test(DS.LogType)){if(obj[1]!=="Pageview"){DS.VisitType=undefined;DS.ReVisit=undefined}if(obj[1]==="Search"){var searchP=obj[2].search_parameter;if(searchP){obj[2].search_string=URL.GetParam(searchP)}}if(obj[1]==="Purchase"){if(obj[2].price){var price=obj[2].price;delete obj[2].price;obj[2].total_price=price}}if(obj[1]=="Pageview"){if(DS.EtsParamState||DS.PageviewSendState){LOG.Send(obj)}}else{LOG.Send(obj)}}break;default:break}};var init=function(){if(!window.JSON){UTIL.SetJSON()}var i;var qu=DS.Win.cre.queue;var qulen=qu.length;for(i=0;i<qulen;i++){push(qu[i])}try{Object.defineProperty(qu,"push",{value:push})}catch(e){qu.push=push}};UTIL.GetFingerId(init)})();